<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flask Search API Dokümantasyonu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f9;
      color: #222;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 950px;
      margin: 0 auto;
      background: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h1 {
      color: #007bff;
      margin-bottom: 10px;
    }
    h2 {
      color: #333;
      margin-top: 25px;
    }
    pre {
      background: #272822;
      color: #f8f8f2;
      padding: 12px;
      border-radius: 5px;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th {
      background: #007bff;
      color: white;
    }
    input, select, button {
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      width: 100%;
    }
    button {
      background: #007bff;
      color: #fff;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #0056b3;
    }
    #result {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #f7f7f7;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-family: monospace;
      max-height: 400px;
      overflow-y: auto;
    }
    .optional {
      color: #888;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🔍 Flask Search API</h1>
    <p>Bu API, Google araması yaparak sonuçları JSON formatında döndürür. Başlık, açıklama, domain ve hedef site kontrolü içerir.</p>

    <h2>🌍 API Bilgileri</h2>
    <p><b>Base URL:</b> <code>https://flask-search-api-3fox.onrender.com</code></p>
    <p><b>Endpoint:</b> <code>/search</code></p>
    <p><b>Yöntem:</b> GET</p>
    <p><b>Yanıt Tipi:</b> JSON</p>
    <p><b>CORS:</b> ✔ Destekleniyor</p>

    <h2>📌 Parametreler</h2>
    <table>
      <tr>
        <th>Parametre</th>
        <th>Açıklama</th>
        <th>Örnek Değer</th>
        <th>Zorunlu</th>
      </tr>
      <tr>
        <td>query</td>
        <td>Aranacak kelime veya cümle</td>
        <td>openai</td>
        <td>✔</td>
      </tr>
      <tr>
        <td>dil</td>
        <td>Arama dili</td>
        <td>tr</td>
        <td>✔</td>
      </tr>
      <tr>
        <td>bolge</td>
        <td>Arama bölgesi</td>
        <td>tr</td>
        <td>✔</td>
      </tr>
      <tr>
        <td>device</td>
        <td>Cihaz türü: <code>desktop</code> veya <code>mobile</code></td>
        <td>desktop</td>
        <td>✔</td>
      </tr>
      <tr>
        <td>site_filter</td>
        <td>Belirli bir domain ile filtreleme</td>
        <td>openai.com</td>
        <td>✔</td>
      </tr>
      <tr>
        <td>meta</td>
        <td>
          Sayfa başlığı ve açıklamasını çekme: <br>
          <b>1</b> = Başlık & açıklama alınır <br>
          <b>0</b> = Hızlı mod (sadece URL/domain döner)
        </td>
        <td>1</td>
        <td class="optional">Opsiyonel</td>
      </tr>
    </table>

    <h2>⚡ Örnek Sorgu</h2>
    <pre>
GET /search?query=openai&dil=tr&bolge=tr&device=desktop&site_filter=openai.com&meta=1
    </pre>

    <h2>✅ Örnek Yanıt</h2>
    <pre>
[
  {
    "sira": 1,
    "url": "https://openai.com/",
    "domain": "openai.com",
    "baslik": "OpenAI",
    "aciklama": "OpenAI, yapay zeka araştırmaları yapan bir şirkettir.",
    "hedef_site_mi": true
  }
]
    </pre>

    <h2>🧪 Canlı API Testi</h2>
    <form onsubmit="return false;">
      <label>Sorgu (query) *</label>
      <input id="query" type="text" placeholder="örn: openai" required />

      <label>Dil (dil) *</label>
      <input id="dil" type="text" placeholder="örn: tr" required />

      <label>Bölge (bolge) *</label>
      <input id="bolge" type="text" placeholder="örn: tr" required />

      <label>Cihaz (device) *</label>
      <select id="device" required>
        <option value="">Seçiniz</option>
        <option value="desktop">Desktop</option>
        <option value="mobile">Mobile</option>
      </select>

      <label>Site Filtresi (site_filter) *</label>
      <input id="site_filter" type="text" placeholder="örn: openai.com" required />

      <label>Meta *</label>
      <select id="meta" required>
        <option value="1" selected>Başlık & Açıklama Al (Yavaş)</option>
        <option value="0">Hızlı Mod (Başlık & Açıklama Yok)</option>
      </select>

      <button onclick="testAPI()">API'yi Test Et</button>
    </form>

    <div id="result">Henüz bir sorgu yapılmadı.</div>
  </div>

  <script>
    async function testAPI() {
      const query = document.getElementById("query").value;
      const dil = document.getElementById("dil").value;
      const bolge = document.getElementById("bolge").value;
      const device = document.getElementById("device").value;
      const siteFilter = document.getElementById("site_filter").value;
      const meta = document.getElementById("meta").value;

      if (!query || !dil || !bolge || !device || !siteFilter) {
        alert("Lütfen tüm zorunlu alanları doldurun!");
        return;
      }

      let url = `https://flask-search-api-3fox.onrender.com/search?query=${encodeURIComponent(query)}&dil=${encodeURIComponent(dil)}&bolge=${encodeURIComponent(bolge)}&device=${encodeURIComponent(device)}&site_filter=${encodeURIComponent(siteFilter)}&meta=${encodeURIComponent(meta)}`;

      try {
        const response = await fetch(url);
        const data = await response.json();
        document.getElementById("result").innerText = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById("result").innerText = "❌ API isteği başarısız: " + err;
      }
    }
  </script>
</body>
</html>
